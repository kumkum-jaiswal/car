!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=33)}([function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i,a,o,s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"sendPageParams",value:function(t,n,r,i,a){var o="https://".concat(n,"/hit"),s=new FormData,c=e.observeClickId();s.append("sid",r),s.append("placement",t),s.append("lid",i),s.append("d",a),c&&s.append("click_id",c),navigator.sendBeacon(o,s)}},{key:"observePlacement",value:function(t){var n=new URLSearchParams(window.location.search);return e.scriptDataSet.placement&&"{t1}"!==e.scriptDataSet.placement?e.scriptDataSet.placement:e.scriptDataSet.placementParam&&n.get(e.scriptDataSet.placementParam)?n.get(e.scriptDataSet.placementParam):n.get("placement")||n.get("zone")||t||""}},{key:"observeClickId",value:function(){if(e.scriptDataSet.click&&"{clickid}"!==e.scriptDataSet.click)return e.scriptDataSet.click;var t=new URLSearchParams(window.location.search);return t.get("clickid")||t.get("click_id")||t.get("cnv_id")||""}},{key:"observeParam",value:function(e){return new URLSearchParams(window.location.search).get(e)||""}},{key:"observeParamWithDataAttr",value:function(t){if(e.scriptDataSet[t])return e.scriptDataSet[t];var n=new URLSearchParams(window.location.search);return"sub1"===t&&n.get("campaign")?n.get("campaign"):n.get(t)||""}}],(n=null)&&r(t.prototype,n),i&&r(t,i),e}();i=s,a="scriptDataSet",o="undefined"!=typeof document&&document.currentScript?document.currentScript.dataset:{},a in i?Object.defineProperty(i,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):i[a]=o,t.a=s},function(e,t,n){e.exports=n(13)},,,function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[];r(this,e),this.title=t||"",this.body=n||"",this.image=i||"",this.icon=a||"",this.clickUrl=o,this.clickPostbackUrl="",this.tag=s||"",this.actions=c||[],this.showDelaySeconds=0}var t,n,a;return t=e,a=[{key:"NewDefault",value:function(){return new e("(1) New Message","Click Here to Open","https://img.vmmcdn.com/get/19856304/53467_image.png","https://img.vmmcdn.com/get/7163008/53467_icon.png","https://hypshalognome.com/click.php?key=qhuyiut92s6pj767cr7&click_id=&v_placement_id=&v_campaign_id=&v_site_id=&v_creative_id=&type=Push&age=0&creative_id=&campaign_id=&site_id=6229&placement_id=","00",[])}}],(n=null)&&i(t.prototype,n),a&&i(t,a),e}();t.a=a},,,function(e,t,n){"use strict";t.__esModule=!0,t.detectIncognito=void 0;t.detectIncognito=function(){return new Promise((function(e,t){var n,r,i="Unknown";function a(t){e({isPrivate:t,browserName:i})}function o(e){return e===eval.toString().length}function s(){void 0!==navigator.maxTouchPoints?function(){var e=String(Math.random());try{window.indexedDB.open(e,1).onupgradeneeded=function(t){var n,r,i=null===(n=t.target)||void 0===n?void 0:n.result;try{i.createObjectStore("test",{autoIncrement:!0}).put(new Blob),a(!1)}catch(e){var o=e;return e instanceof Error&&(o=null!==(r=e.message)&&void 0!==r?r:e),"string"!=typeof o?a(!1):a(/BlobURLs are not yet supported/.test(o))}finally{i.close(),window.indexedDB.deleteDatabase(e)}}}catch(e){return a(!1)}}():function(){var e=window.openDatabase,t=window.localStorage;try{e(null,null,null,null)}catch(e){return a(!0)}try{t.setItem("test","1"),t.removeItem("test")}catch(e){return a(!0)}a(!1)}()}function c(){navigator.webkitTemporaryStorage.queryUsageAndQuota((function(e,t){var n;a(Math.round(t/1048576)<2*Math.round((void 0!==(n=window).performance&&void 0!==n.performance.memory&&void 0!==n.performance.memory.jsHeapSizeLimit?performance.memory.jsHeapSizeLimit:1073741824)/1048576))}),(function(e){t(new Error("detectIncognito somehow failed to query storage quota: "+e.message))}))}function u(){void 0!==self.Promise&&void 0!==self.Promise.allSettled?c():(0,window.webkitRequestFileSystem)(0,1,(function(){a(!1)}),(function(){a(!0)}))}void 0!==(r=navigator.vendor)&&0===r.indexOf("Apple")&&o(37)?(i="Safari",s()):function(){var e=navigator.vendor;return void 0!==e&&0===e.indexOf("Google")&&o(33)}()?(n=navigator.userAgent,i=n.match(/Chrome/)?void 0!==navigator.brave?"Brave":n.match(/Edg/)?"Edge":n.match(/OPR/)?"Opera":"Chrome":"Chromium",u()):void 0!==document.documentElement&&void 0!==document.documentElement.style.MozAppearance&&o(37)?(i="Firefox",a(void 0===navigator.serviceWorker)):void 0!==navigator.msSaveBlob&&o(39)?(i="Internet Explorer",a(void 0===window.indexedDB)):t(new Error("detectIncognito cannot determine the browser"))}))}},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.domain=t,this.uid=n}var t,n,i;return t=e,(n=[{key:"log",value:function(e,t){var n=new FormData;n.append("uid",this.uid),n.append("m",e),n.append("t",t),navigator.sendBeacon(this.getUrl(),n)}},{key:"getUrl",value:function(){return"https://".concat(this.domain,"/api/report")}}])&&r(t.prototype,n),i&&r(t,i),e}();t.a=i},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t);var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"isIos",value:function(){return(/iPad|iPhone|iPod/.test(navigator.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&!window.MSStream}},{key:"isMac",value:function(){return-1!==["Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(navigator.platform)}},{key:"isSafari",value:function(){return(this.isIos()||this.isMac())&&navigator.userAgent.toLowerCase().includes("safari")&&!navigator.userAgent.toLowerCase().includes("chrome")&&!navigator.userAgent.toLowerCase().includes("fxios")}},{key:"isSafariWebPushSupport",value:function(){if(!this.isSafari())return!1;if(1!==parseInt(new URL(window.location.href).searchParams.get("fswp")))return!1;var e=navigator.userAgent.toLowerCase(),t=0,n=e.indexOf("version/");return-1!==n&&(t=parseInt(e.substring(n+8,n+10))),!(t<16)&&"PushManager"in window}}],(n=null)&&r(t.prototype,n),i&&r(t,i),e}();t.default=i},,function(e,t,n){"use strict";n.r(t);var r=n(1),i=n.n(r),a=n(4);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){d(a,r,i,o,s,"next",e)}function s(e){d(a,r,i,o,s,"throw",e)}o(void 0)}))}}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var f=n(21)(self?self.fetch:window.fetch),v=function(e){return new Promise((function(t){return setTimeout(t,e)}))},b=function(){function e(t,n,r,i){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.tagId=t,this.domain=n,this.landingId=r,this.uid="",this.options=i,void 0!==location){var a=new URLSearchParams(location.search);a.has("uid")&&(this.uid=a.get("uid"))}this.actions={bid:this.onBid.bind(this),creative:this.onOfflinePush.bind(this)},this.messages={subscription:this.onSuccessSubscription.bind(this)},this.bindAll()}var t,n,r,o,c,l,d,b,y;return t=e,n=[{key:"bindAll",value:function(){self.addEventListener("push",this.onPush.bind(this)),self.addEventListener("notificationclick",this.onNotificationClick.bind(this)),self.addEventListener("message",this.onMessage.bind(this)),self.addEventListener("install",this.onInstall.bind(this)),self.addEventListener("notificationclose",this.onClose.bind(this)),self.addEventListener("activate",(function(e){e.waitUntil(self.clients.claim())}))}},{key:"onInstall",value:function(e){e.waitUntil(self.skipWaiting())}},{key:"onMessage",value:function(e){var t=this.messages[e.data.event||""];t&&t(e,e.data)}},{key:"onSuccessSubscription",value:function(e,t){this.options.pushOnSubscription&&this.handlePush(e,{command:"bid",subscriber_id:e.data.subscriberId}).then((function(){}))}},{key:"onPush",value:function(e){var t=null;try{t=e.data&&e.data.json()}catch(e){}t&&e.waitUntil(this.handlePush(e,t))}},{key:"onClose",value:function(e){var t=null;try{t=e.notification.data}catch(e){}null!=t&&null!=t.closePostback&&this.sendClosePostback(t.closePostback)}},{key:"handlePush",value:(y=h(i.a.mark((function e(t,n){var r,a,o,s,c,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.command,(a=n.show_options||{}).closePostback=n.nc||null,a.clickClosePostback=n.ncc||null,e.next=6,this.onCommand(r,t,n);case 6:o=e.sent,s=u(o),e.prev=8,s.s();case 10:if((c=s.n()).done){e.next=19;break}if(!(l=c.value).showDelaySeconds){e.next=15;break}return e.next=15,v(1e3*l.showDelaySeconds);case 15:return e.next=17,this.showNotification(l,!0,a);case 17:e.next=10;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(8),s.e(e.t0);case 24:return e.prev=24,s.f(),e.finish(24);case 27:case"end":return e.stop()}}),e,this,[[8,21,24,27]])}))),function(e,t){return y.apply(this,arguments)})},{key:"onCommand",value:(b=h(i.a.mark((function e(t,n,r){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=this.actions[t])||(a=this.actions.bid),e.next=6,a(r);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return b.apply(this,arguments)})},{key:"onBid",value:(d=h(i.a.mark((function t(n){var r,o,s,c,l,d,h,p,v,b;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.subscriber_id||n.subscriberId,o=n.tag_id||this.tagId,s=n.payload||"",c=n.landingId||this.landingId,l=this.getBidUrl()+"?sid=".concat(o,"&uid=").concat(this.uid,"&subId=").concat(r,"&p=").concat(s,"&lid=").concat(c),n.bid_url&&(l=(l=n.bid_url).replace("{uid}",this.uid)),l+="&v="+e.getProtocolVersion(),t.next=10,f(l);case 10:if(200===(d=t.sent).status){t.next=13;break}return t.abrupt("return",[a.a.NewDefault()]);case 13:return t.prev=13,t.next=16,d.json();case 16:if("bids"in(d=t.sent)){t.next=20;break}return t.abrupt("return",[this.responseItemToCreative(d)]);case 20:h=[],p=u(d.bids);try{for(p.s();!(v=p.n()).done;)b=v.value,h.push(this.responseItemToCreative(b))}catch(e){p.e(e)}finally{p.f()}return t.abrupt("return",h);case 26:return t.prev=26,t.t0=t.catch(13),t.abrupt("return",[a.a.NewDefault()]);case 30:case"end":return t.stop()}}),t,this,[[13,26]])}))),function(e){return d.apply(this,arguments)})},{key:"responseItemToCreative",value:function(e){var t=e.click_url,n="";e.direct_url&&(t=e.direct_url,n=e.click_postback_url||e.click_url+"&nr=1");var r=new a.a(e.title,e.message,e.image_url,e.icon_url,t,e.tag,e.actions);return r.clickPostbackUrl=n,e.show_delay_seconds&&(r.showDelaySeconds=e.show_delay_seconds),r}},{key:"onOfflinePush",value:(l=h(i.a.mark((function e(t){var n,r,o,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.bid,r=n.click_url,o="",n.direct_url&&(r=n.direct_url,o=n.click_postback_url||n.click_url+"&nr=1"),(s=new a.a(n.title,n.description,n.image,n.icon,r,n.tag,n.actions)).clickPostbackUrl=o,n.show_delay_seconds&&(s.showDelaySeconds=n.show_delay_seconds),e.abrupt("return",[s]);case 8:case"end":return e.stop()}}),e)}))),function(e){return l.apply(this,arguments)})},{key:"showNotification",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(void 0!==e)return n||(n={}),e.tag&&(n.tag=e.tag),e.actions&&(n.actions=e.actions),self.registration.showNotification(e.title,s({body:e.body,icon:e.icon,image:e.image,data:{clickUrl:e.clickUrl,closePostback:n.closePostback,clickClosePostback:n.clickClosePostback,clickPostback:e.clickPostbackUrl},requireInteraction:t,silent:!1},n))}},{key:"onNotificationClick",value:(c=h(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.notification.close(),n=null;try{n=t.notification.data}catch(e){}if(null!=n){e.next=6;break}return e.abrupt("return");case 6:null!=n.clickClosePostback&&this.sendClosePostback(n.clickClosePostback),t.waitUntil(this.processNotificationClick(n));case 8:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"processNotificationClick",value:function(e){var t=[],n=self.clients.openWindow(e.clickUrl).then((function(e){return e.focus()}));t.push(n);try{if(e.clickPostback)try{t.push(f(e.clickPostback.replace("http://","https://"),{retries:5}))}catch(e){}}catch(e){}return Promise.allSettled(t)}},{key:"sendClosePostback",value:(o=h(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://"+this.domain+t,e.prev=1,e.next=5,f(n);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1);case 10:case"end":return e.stop()}}),e,this,[[1,7]])}))),function(e){return o.apply(this,arguments)})},{key:"getBidUrl",value:function(){return"https://"+this.domain+"/api/bid"}},{key:"getRedirectUrl",value:function(e){return"https://"+this.domain+"/api/redir?u="+encodeURI(e)}}],r=[{key:"getProtocolVersion",value:function(){return 2}}],n&&p(t.prototype,n),r&&p(t,r),e}();t.default=b},,function(e,t,n){var r=function(e){"use strict";var t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof d?t:d,a=Object.create(i.prototype),o=new S(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return O()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=w(o,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(e,n,o),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var l={};function d(){}function h(){}function p(){}var f={};f[i]=function(){return this};var v=Object.getPrototypeOf,b=v&&v(v(_([])));b&&b!==t&&n.call(b,i)&&(f=b);var y=p.prototype=d.prototype=Object.create(f);function m(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){var r;this._invoke=function(i,a){function o(){return new t((function(r,o){!function r(i,a,o,s){var c=u(e[i],e,a);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,o,s)}),(function(e){r("throw",e,o,s)})):t.resolve(d).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,s)}))}s(c.arg)}(i,a,r,o)}))}return r=r?r.then(o,o):o()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function _(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:O}}function O(){return{value:void 0,done:!0}}return h.prototype=y.constructor=p,p.constructor=h,h.displayName=s(p,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,o,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},m(g.prototype),g.prototype[a]=function(){return this},e.AsyncIterator=g,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new g(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},m(y),s(y,o,"Generator"),y[i]=function(){return this},y.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=_,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(P),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;P(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}(e.exports);try{regeneratorRuntime=r}catch(e){Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){"use strict";var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),i=new Uint8Array(16);function a(){if(!r)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(i)}var o=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var s=function(e){return"string"==typeof e&&o.test(e)},c=[],u=0;u<256;++u)c.push((u+256).toString(16).substr(1));var l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(c[e[t+0]]+c[e[t+1]]+c[e[t+2]]+c[e[t+3]]+"-"+c[e[t+4]]+c[e[t+5]]+"-"+c[e[t+6]]+c[e[t+7]]+"-"+c[e[t+8]]+c[e[t+9]]+"-"+c[e[t+10]]+c[e[t+11]]+c[e[t+12]]+c[e[t+13]]+c[e[t+14]]+c[e[t+15]]).toLowerCase();if(!s(n))throw TypeError("Stringified UUID is invalid");return n};t.a=function(e,t,n){var r=(e=e||{}).random||(e.rng||a)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return l(r)}},,,function(e,t,n){"use strict";n.r(t);var r=n(0);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t,n,i,a,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.objectName=t,this.redirectUrl="".concat(n,"&placement=").concat(r.a.observePlacement(),"&fe=0&s=1"),this.cappingValue=a.capping.value||0,this.cappingExptime=a.capping.exptime||0,this.customOptions=a.popunderjs_options||{},this.customConfig=a.popunderjs_config||{},this.delay=o,i||(this.delay>0?setTimeout(this.register.bind(this),1e3*this.delay):this.register())}var t,n,a;return t=e,(n=[{key:"register",value:function(){window[this.objectName].config(this.customConfig),window[this.objectName].add(this.redirectUrl,this.getOptions())}},{key:"getDefaultOptions",value:function(){return{under:!1,newTab:!0}}},{key:"getOptions",value:function(){var e=this.getDefaultOptions();for(var t in this.customOptions)e[t]=this.customOptions[t];return this.cappingValue>0&&(e=this.enrichOptionsWithCapping(e)),e}},{key:"enrichOptionsWithCapping",value:function(e){var t=window[this.objectName].getConfig();e.cookieExpires=-1;var n=parseInt(window[this.objectName].Cookie.get("popcnt"))||0;return(t.bindTo.length>0&&!window[this.objectName].Cookie.get("fpop")||n<this.cappingValue-1)&&this.createOverlayContainers(t.bindTo),e.beforeOpen=function(e,t){window[this.objectName].Cookie.get("fpop")||window[this.objectName].Cookie.set("fpop",1,this.cappingExptime||86400)}.bind(this),e.afterOpen=function(e,n,r){var i=parseInt(window[this.objectName].Cookie.get("popcnt"))||0;window[this.objectName].Cookie.set("popcnt",++i,this.cappingExptime||86400),t.bindTo.length>0&&i===this.cappingValue-1&&this.removeOverlayContainers()}.bind(this),e.shouldFire=function(){var e=parseInt(window[this.objectName].Cookie.get("popcnt"))||0;return this.cappingExptime>0&&e>=this.cappingValue&&!window[this.objectName].Cookie.get("fpop")?(window[this.objectName].reset(),window[this.objectName].Cookie.remove("fpop"),window[this.objectName].Cookie.remove("popcnt"),!0):0===this.cappingExptime?window[this.objectName].getFiredCount()<this.cappingValue:e<this.cappingValue}.bind(this),e}},{key:"createOverlayContainers",value:function(e){this.removeOverlayContainers();for(var t=0;t<e.length;t++)document.querySelectorAll(e[t]).forEach((function(e){var t=e.getBoundingClientRect(),n=document.createElement("div");n.classList.add("pjs-overlay-layer"),n.style.position="absolute",n.style.zIndex="999999",n.style.width=t.width+"px",n.style.height=t.height+"px",n.style.top=t.top+window.scrollY+"px",n.style.left=t.left+window.scrollX+"px",document.body.appendChild(n)}))}},{key:"removeOverlayContainers",value:function(){document.querySelectorAll(".pjs-overlay-layer").forEach((function(e){e.remove()}))}}])&&i(t.prototype,n),a&&i(t,a),e}();t.default=a},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t);var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=JSON.parse(t),this._pushEnabled=!1,this._popunderEnabled=!1,this._inpageEnabled=!1,this._calendarEnabled=!1,this._vapidPublicKey=this.options.VAPID_PUBLIC_KEY,this._domain=this.options.DOMAIN,this._script_domain=this.options.SCRIPT_DOMAIN,this._tagId=this.options.TAG_ID,this._redirectFlags=this.options.REDIRECT_FLAGS,this._calendarRedirectFlags=this.options.CALENDAR_REDIRECT_FLAGS,this._placement=this.options.PLACEMENT,this._manualSubscribe=this.options.MANUAL_SUBSCRIBE,this._subscribeDelay=this.options.SUBSCRIBE_DELAY,this._inpagePushDelay=this.options.INPAGE_PUSH_DELAY,this._inpageClassName=this.options.INPAGE_CLASSNAME,this._inpageStyles=this.options.INPAGE_STYLES,this._calendarPermRequestType=this.options.CALENDAR_PERM_REQUEST_TYPE,this._permRequestType=this.options.PERM_REQUEST_TYPE,this._hasMacSupport=this.options.HAS_MAC_SUPPORT,this._popunderObjectName=this.options.POPUNDER_OBJECT_NAME,this._popunderRedirectUrl=this.options.POPUNDER_REDIRECT_URL,this._popunderManual=this.options.POPUNDER_MANUAL,this._popunderScriptConfig=this.options.POPUNDER_SCRIPT_CONFIG,this._popunderDelay=this.options.POPUNDER_DELAY,this._calendarManualSubscribe=this.options.CALENDAR_MANUAL_SUBSCRIBE,this._calendarSubscribeDelay=this.options.CALENDAR_SUBSCRIBE_DELAY_SECONDS,this._pushOnSubscription=this.options.PUSH_ON_SUBSCRIPTION,this._prompt_options=this.options.PROMPT_OPTIONS,this._calendar_prompt_options=this.options.CALENDAR_PROMPT_OPTIONS,this._prompt_dialog_id=this.options.PROMPT_DIALOG_ID,this._landing_id=this.options.LANDING,this._supportIos=this.options.SUPPORT_IOS,this.initEnabledDirections()}var t,n,i;return t=e,(n=[{key:"getOptions",value:function(){return this.options}},{key:"initEnabledDirections",value:function(){var e=this.options.ENABLED_TAG_MODES;(isNaN(e)||0===e)&&(e=2),this._pushEnabled=2==(2&e),this._popunderEnabled=4==(4&e),this._inpageEnabled=8==(8&e),this._calendarEnabled=16==(16&e)}},{key:"isPushEnabled",value:function(){return this._pushEnabled}},{key:"isPopunderEnabled",value:function(){return this._popunderEnabled}},{key:"isInpageEnabled",value:function(){return this._inpageEnabled}},{key:"isCalendarEnabled",value:function(){return this._calendarEnabled}},{key:"isManualSubscribe",value:function(){return this._manualSubscribe||1===this._permRequestType}},{key:"isPopunderManual",value:function(){return this._popunderManual}},{key:"getPopunderScriptConfig",value:function(){return this._popunderScriptConfig}},{key:"isCalendarManualSubscribe",value:function(){return this._calendarManualSubscribe}},{key:"isPushOnSubscription",value:function(){return this._pushOnSubscription}},{key:"isPermRequestPrompt",value:function(){return 1===this._permRequestType}},{key:"isCalendarPermRequestPrompt",value:function(){return 1===this._calendarPermRequestType}},{key:"hasMacSupport",value:function(){return this._hasMacSupport}},{key:"getVapidPublicKey",value:function(){return this._vapidPublicKey}},{key:"getDomain",value:function(){return this._domain}},{key:"getScriptDomain",value:function(){return this._script_domain}},{key:"getTagId",value:function(){return this._tagId}},{key:"getRedirectFlags",value:function(){return this._redirectFlags}},{key:"getCalendarRedirectFlags",value:function(){return this._calendarRedirectFlags}},{key:"getPlacement",value:function(){return this._placement}},{key:"getSubscribeDelay",value:function(){return this._subscribeDelay}},{key:"getCalendarSubscribeDelay",value:function(){return this._calendarSubscribeDelay}},{key:"getInpagePushDelay",value:function(){return this._inpagePushDelay}},{key:"getInpageClassName",value:function(){return this._inpageClassName}},{key:"getCalendarPermRequestType",value:function(){return this._calendarPermRequestType}},{key:"getPermRequestType",value:function(){return this._permRequestType}},{key:"getPopunderObjectName",value:function(){return this._popunderObjectName}},{key:"getPopunderRedirectUrl",value:function(){return this._popunderRedirectUrl}},{key:"getPopunderDelay",value:function(){return this._popunderDelay}},{key:"getPromptOptions",value:function(){return this._prompt_options}},{key:"getCalendarPromptOptions",value:function(){return this._prompt_options}},{key:"getPromptDialogId",value:function(){return this._prompt_dialog_id}},{key:"getLandingId",value:function(){return this._landing_id}},{key:"getInpageStyles",value:function(){return this._inpageStyles}},{key:"getSupportIos",value:function(){return this._supportIos}}])&&r(t.prototype,n),i&&r(t,i),e}();t.default=i},function(e,t,n){"use strict";function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw o}}}}function a(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t);var u=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=document.currentScript?document.currentScript.dataset:{};this.onSubscribed=[],this.onAlreadySubscribed=[],this.onDenied=[],this.onFailed=[],this.onGranted=[],this.isSubscribed=!1,this.isAlreadySubscribed=!1,this.isDenied=!1,this.isFailed=!1,this.granted="",this.callbackNames=(s(t={},"onSubscribed",n.onSubscribed||"pushOnSubscribed"),s(t,"onAlreadySubscribed",n.onAlreadySubscribed||"pushOnAlreadySubscribed"),s(t,"onDenied",n.onDenied||"pushOnDenied"),s(t,"onFailed",n.onFailed||"pushOnFailed"),s(t,"onGranted",n.onGranted||"pushOnGranted"),t)}var t,n,a;return t=e,(n=[{key:"initHistoryEvent",value:function(e){document.addEventListener("DOMContentLoaded",(function(){window.history.pushState(null,null,window.location.href),window.addEventListener("popstate",(function(t){window.location=e}))}))}},{key:"emit",value:function(e){var t,n=[],a=!0,o=i(this[e]);try{for(o.s();!(t=o.n()).done;){var s=t.value;n.push(s)}}catch(e){o.e(e)}finally{o.f()}n.push.apply(n,r(this.getGlobalCallback(this.callbackNames[e])));for(var c=arguments.length,u=new Array(c>1?c-1:0),l=1;l<c;l++)u[l-1]=arguments[l];for(var d=0,h=n;d<h.length;d++){var p=h[d];"function"==typeof p&&!1===p.call.apply(p,[window].concat(u))&&(a=!1)}return a}},{key:"getGlobalCallback",value:function(e){return window[e]?"function"==typeof window[e]?[window[e]]:Array.isArray(window[e])?window[e]:[]:[]}},{key:"renotify",value:function(){this.isSubscribed&&this.emit(e.ON_SUBSCRIBED),this.isAlreadySubscribed&&this.emit(e.ON_ALREADY_SUBSCRIBED),this.isDenied&&this.emit(e.ON_DENIED),this.isFailed&&this.emit(e.ON_FAILED),this.granted.length>0&&this.emit(e.ON_GRANTED,this.granted)}},{key:"addOnSubscribed",value:function(e){this.onSubscribed.push(e),this.isSubscribed&&e()}},{key:"addOnAlreadySubscribed",value:function(e){this.onAlreadySubscribed.push(e),this.isAlreadySubscribed&&e()}},{key:"addOnDenied",value:function(e){this.onDenied.push(e),this.isDenied&&e()}},{key:"addOnFailed",value:function(e){this.onFailed.push(e),this.isFailed&&e()}},{key:"addOnGranted",value:function(e){this.onGranted.push(e),this.granted.length>0&&e(this.granted)}},{key:"getOnSubscribed",value:function(){return"onSubscribed"}},{key:"getOnAlreadySubscribed",value:function(){return"onAlreadySubscribed"}},{key:"getOnDenied",value:function(){return"onDenied"}},{key:"getOnFailed",value:function(){return"onFailed"}},{key:"getOnGranted",value:function(){return"onGranted"}}])&&c(t.prototype,n),a&&c(t,a),e}();t.default=u},function(e,t,n){"use strict";n.r(t);var r=n(1),i=n.n(r),a=n(14),o=n(7),s=n(8),c=n(0),u=n(9);function l(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){l(a,r,i,o,s,"next",e)}function s(e){l(a,r,i,o,s,"throw",e)}o(void 0)}))}}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p=function(){function e(t,n,r,i,a,l,d,h,p,f,v){var b=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.domain=n,this.sciptDomain=r,this.tagId=t,this.publicKey=i,this.placement=a,this.landingId=l,this.redirectFlags=d,this.manualSubscribe=h,this.subscribeDelay=p,this.supportIos=f,this.pushEvent=v,this.redirectMap={},this.granted="",this.initUser(),this.initRedirects();var y="tbi"===c.a.observeParam("type").toLowerCase();y||c.a.sendPageParams(c.a.observePlacement(this.placement),this.domain,this.tagId,this.landingId,1),this.pushEvent.initHistoryEvent(this.redirectMap[16]),this.analytics=new s.a(n,window._uid),u.default.isIos()&&!this.supportIos||Object(o.detectIncognito)().then((function(e){!e.isPrivate||y?b.manualSubscribe||(b.subscribeDelay>0?setTimeout(b.requestSubscription.bind(b),1e3*b.subscribeDelay):b.requestSubscription()):b.redirect(32)}))}var t,n,r,l,p,f;return t=e,n=[{key:"initUser",value:function(){window._uid||(window._uid=Object(a.a)(),this.uid=window._uid)}},{key:"initRedirects",value:function(){for(var e in this.redirectMap[2]="",this.redirectMap[4]="",this.redirectMap[8]="",this.redirectMap[16]="",this.redirectMap[32]="",this.redirectMap)(this.redirectFlags&e)==e&&(this.redirectMap[e]=this.createRedirectUrl(e))}},{key:"createRedirectUrl",value:function(e){var t=encodeURI(c.a.observePlacement(this.placement)),n=encodeURI(c.a.observeClickId()),r=encodeURI(c.a.observeParamWithDataAttr("sub1")),i=encodeURI(c.a.observeParamWithDataAttr("sub2")),a=encodeURI(c.a.observeParamWithDataAttr("sub3")),o=encodeURI(c.a.observeParam("sub4")),s=encodeURI(c.a.observeParam("sub5"));return"https://".concat(this.domain,"/redirect/e?t=").concat(e,"&sid=").concat(this.tagId,"&click_id=").concat(n,"&placement=").concat(t,"&d=").concat(1,"&lid=").concat(this.landingId,"&sub1=").concat(r,"&sub2=").concat(i,"&sub3=").concat(a,"&sub4=").concat(o,"&sub5=").concat(s)}},{key:"requestSubscription",value:function(){this.registerServiceWorker(!0).then((function(){}))}},{key:"registerServiceWorker",value:(f=d(i.a.mark((function e(){var t,n=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!(n.length>0&&void 0!==n[0])||n[0],e.next=3,Notification.requestPermission();case 3:t=e.sent,this.granted=t;try{this.pushEvent.emit(this.pushEvent.getOnGranted(),t)}catch(e){}if(this.analytics.log("request permission",this.granted),!navigator.serviceWorker){e.next=15;break}return e.next=10,navigator.serviceWorker.register("/av_sw.js?uid="+window._uid+"&sid="+this.tagId+"&sd="+btoa(this.sciptDomain));case 10:return e.next=13,this.subscribe();case 13:e.next=20;break;case 15:this.analytics.log("not supported",navigator.userAgent),this.pushEvent.isDenied=!0,this.pushEvent.emit(this.pushEvent.getOnDenied(),this.redirectMap[4])&&this.redirect(4),"denied"!==this.granted&&(this.pushEvent.isFailed=!0,this.pushEvent.emit(this.pushEvent.getOnFailed(),this.redirectMap[4])&&this.redirect(4));case 20:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"subscribe",value:(p=d(i.a.mark((function t(){var n,r,a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,navigator.serviceWorker.ready;case 2:return n=t.sent,r=null,t.prev=4,t.next=7,n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:e.urlBase64ToUint8Array(this.publicKey)});case 7:r=t.sent,t.next=19;break;case 10:return t.prev=10,t.t0=t.catch(4),this.pushEvent.isDenied=!0,this.pushEvent.emit(this.pushEvent.getOnDenied(),this.redirectMap[4])&&this.redirect(4),this.analytics.log("failed to subscribe",t.t0.toString()),this.pushEvent.isFailed=!0,this.pushEvent.emit(this.pushEvent.getOnFailed(),this.redirectMap[4])&&this.redirect(4),t.abrupt("return");case 19:return t.next=21,this.sendSubscription(r.toJSON());case 21:(a=t.sent).subscribed&&(a.already?(this.pushEvent.isAlreadySubscribed=!0,this.pushEvent.emit(this.pushEvent.getOnAlreadySubscribed(),this.redirectMap[8])&&this.redirect(8)):(this.pushEvent.isSubscribed=!0,this.pushEvent.emit(this.pushEvent.getOnSubscribed(),this.redirectMap[2])&&this.redirect(2)));case 23:case"end":return t.stop()}}),t,this,[[4,10]])}))),function(){return p.apply(this,arguments)})},{key:"sendSubscription",value:(l=d(i.a.mark((function t(n){var r,a,o,s,u;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=new FormData).append("tz",e.getTimezoneOffset()),r.append("tag_id",this.tagId||""),r.append("payload",JSON.stringify(n)),r.append("uid",window._uid),r.append("lid",this.landingId),r.append("sub1",encodeURI(c.a.observeParamWithDataAttr("sub1"))),r.append("sub2",encodeURI(c.a.observeParamWithDataAttr("sub2"))),r.append("sub3",encodeURI(c.a.observeParamWithDataAttr("sub3"))),r.append("sub4",encodeURI(c.a.observeParam("sub4"))),r.append("sub5",encodeURI(c.a.observeParam("sub5"))),(a=c.a.observeClickId())&&r.append("click_id",a),r.append("placement",c.a.observePlacement(this.placement)),o="https://"+this.domain+"/api/subscribe",t.next=17,fetch(o,{method:"POST",body:r,headers:{Accept:"application/json"}});case 17:return s=t.sent,t.next=20,s.json();case 20:return(u=t.sent).id,u.is_new&&this.sendMessage({event:"subscription",subscriberId:u.id}).then((function(){})),t.abrupt("return",{subscribed:u.id.length>0,already:!u.is_new});case 24:case"end":return t.stop()}}),t,this)}))),function(e){return l.apply(this,arguments)})},{key:"sendMessage",value:function(e){return new Promise((function(t,n){var r=new MessageChannel;r.port1.onmessage=function(e){e.data.error?n(e.data.error):t(e.data)},navigator.serviceWorker.controller.postMessage(e,[r.port2])}))}},{key:"redirect",value:function(e){this.redirectMap[e]&&(window.location=this.redirectMap[e])}}],r=[{key:"urlBase64ToUint8Array",value:function(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),n=window.atob(t),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}},{key:"getTimezoneOffset",value:function(){return-1*(new Date).getTimezoneOffset()}}],n&&h(t.prototype,n),r&&h(t,r),e}();t.default=p},function(e,t,n){e.exports=function(){"use strict";function e(e){return Number.isInteger(e)&&e>=0}function t(e){this.name="ArgumentError",this.message=e}return function(n,r){if(r=r||{},"function"!=typeof n)throw new t("fetch must be a function");if("object"!=typeof r)throw new t("defaults must be an object");if(void 0!==r.retries&&!e(r.retries))throw new t("retries must be a positive integer");if(void 0!==r.retryDelay&&!e(r.retryDelay)&&"function"!=typeof r.retryDelay)throw new t("retryDelay must be a positive integer or a function returning a positive integer");if(void 0!==r.retryOn&&!Array.isArray(r.retryOn)&&"function"!=typeof r.retryOn)throw new t("retryOn property expects an array or function");return r=Object.assign({retries:3,retryDelay:1e3,retryOn:[]},r),function(i,a){var o=r.retries,s=r.retryDelay,c=r.retryOn;if(a&&void 0!==a.retries){if(!e(a.retries))throw new t("retries must be a positive integer");o=a.retries}if(a&&void 0!==a.retryDelay){if(!e(a.retryDelay)&&"function"!=typeof a.retryDelay)throw new t("retryDelay must be a positive integer or a function returning a positive integer");s=a.retryDelay}if(a&&a.retryOn){if(!Array.isArray(a.retryOn)&&"function"!=typeof a.retryOn)throw new t("retryOn property expects an array or function");c=a.retryOn}return new Promise((function(e,t){var r=function(r){var s="undefined"!=typeof Request&&i instanceof Request?i.clone():i;n(s,a).then((function(n){if(Array.isArray(c)&&-1===c.indexOf(n.status))e(n);else if("function"==typeof c)try{return Promise.resolve(c(r,null,n)).then((function(t){t?u(r,null,n):e(n)})).catch(t)}catch(e){t(e)}else r<o?u(r,null,n):e(n)})).catch((function(e){if("function"==typeof c)try{Promise.resolve(c(r,e,null)).then((function(n){n?u(r,e,null):t(e)})).catch((function(e){t(e)}))}catch(e){t(e)}else r<o?u(r,e,null):t(e)}))};function u(e,t,n){var i="function"==typeof s?s(e,t,n):s;setTimeout((function(){r(++e)}),i)}r(0)}))}}}()},function(e,t,n){"use strict";n.r(t);var r=n(1),i=n.n(r),a=n(14),o=n(7),s=n(8),c=n(0);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"get",value:function(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}},{key:"set",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(n=l({path:"/"},n)).expires instanceof Date&&(n.expires=n.expires.toUTCString());var r=encodeURIComponent(e)+"="+encodeURIComponent(t);for(var i in n){r+="; "+i;var a=n[i];!0!==a&&(r+="="+a)}document.cookie=r}}],(n=null)&&h(t.prototype,n),r&&h(t,r),e}();function f(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){f(a,r,i,o,s,"next",e)}function s(e){f(a,r,i,o,s,"throw",e)}o(void 0)}))}}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var y=["top","hot","tip","pal","cup","run"],m=["allowtoprocess.com","gotonewdiamond.com","mac-updates.com","macosx-update.com","macosx-updates.com","stonestiestity.com","update-mac.com","update-macos.com","updates-mac.com","newtestcert.xyz"],g=function(){function e(t,n,r,i,a,u){var l=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.domain=n,this.tagId=c.a.observeParam("tag_id")||t,this.placement=r,this.landingId=i,this.redirectFlags=a,this.pushEvent=u,this.redirectMap={},this.websitePushId="web."+window.location.hostname.split(".").reverse().join("."),this.supportSubdomains=!m.includes(window.location.hostname),this.granted="",this.initUser(),this.initRedirects();var d="tbi"===c.a.observeParam("type").toLowerCase();d||c.a.sendPageParams(c.a.observePlacement(this.placement),this.domain,this.tagId,this.landingId,1),Object(o.detectIncognito)().then((function(e){e.isPrivate&&(d?l.redirect(4):l.redirect(32))})),this.pushEvent.initHistoryEvent(this.redirectMap[16]),this.supportSubdomains&&this.needRedirectToNextSubdomain()&&this.redirectToNextSubdomain(),this.analytics=new s.a(n,window._uid)}var t,n,r,u,l;return t=e,n=[{key:"initUser",value:function(){window._uid||(window._uid=Object(a.a)(),this.uid=window._uid)}},{key:"initRedirects",value:function(){for(var e in this.redirectMap[2]="",this.redirectMap[4]="",this.redirectMap[8]="",this.redirectMap[16]="",this.redirectMap[32]="",this.redirectMap)(this.redirectFlags&e)==e&&(this.redirectMap[e]=this.createRedirectUrl(e))}},{key:"createRedirectUrl",value:function(e){var t=encodeURI(c.a.observePlacement(this.placement)),n=encodeURI(c.a.observeClickId()),r=encodeURI(c.a.observeParam("sub1")),i=encodeURI(c.a.observeParam("sub2")),a=encodeURI(c.a.observeParam("sub3")),o=encodeURI(c.a.observeParam("sub4")),s=encodeURI(c.a.observeParam("sub5"));return"https://".concat(this.domain,"/redirect/e?t=").concat(e,"&sid=").concat(this.tagId,"&click_id=").concat(n,"&placement=").concat(t,"&d=").concat(1,"&sub1=").concat(r,"&sub2=").concat(i,"&sub3=").concat(a,"&sub4=").concat(o,"&sub5=").concat(s)}},{key:"requestSubscription",value:function(){"safari"in window&&"pushNotification"in window.safari&&this.checkRemotePermission(window.safari.pushNotification.permission(this.websitePushId))}},{key:"checkRemotePermission",value:function(e){"default"===e.permission?window.safari.pushNotification.requestPermission("https://".concat(this.domain,"/api/safari"),this.websitePushId,{},this.checkRemotePermission.bind(this)):"denied"===e.permission?(this.markSubdomainAsSkipped(),this.pushEvent.isDenied=!0,this.pushEvent.emit(this.pushEvent.getOnDenied(),this.redirectMap[4])&&(this.supportSubdomains?this.redirectToNextSubdomain():this.redirect(4))):"granted"===e.permission&&(this.markSubdomainAsSkipped(),this.subscribe(e.deviceToken))}},{key:"subscribe",value:(l=v(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sendSubscription(t);case 2:(n=e.sent).subscribed&&(n.already?(this.pushEvent.isAlreadySubscribed=!0,this.pushEvent.emit(this.pushEvent.getOnAlreadySubscribed(),this.redirectMap[8])&&this.redirect(8)):(this.pushEvent.isSubscribed=!0,this.pushEvent.emit(this.pushEvent.getOnSubscribed(),this.redirectMap[2])&&this.redirect(2)));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"sendSubscription",value:(u=v(i.a.mark((function t(n){var r,a,o,s,u,l,d;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for((r=new FormData).append("tz",e.getTimezoneOffset()),r.append("tag_id",this.tagId||""),r.append("uid",window._uid),r.append("lid",this.landingId),r.append("dt",n),(a=c.a.observeClickId())&&r.append("click_id",a),r.append("placement",c.a.observePlacement(this.placement)),o=1;o<=5;o++)(s=c.a.observeParam("sub".concat(o)))&&r.append("sub".concat(o),s);return u="https://"+this.domain+"/api/subscribe",t.next=13,fetch(u,{method:"POST",body:r,headers:{Accept:"application/json"}});case 13:return l=t.sent,t.next=16,l.json();case 16:return(d=t.sent).id,t.abrupt("return",{subscribed:d.id.length>0,already:!d.is_new});case 19:case"end":return t.stop()}}),t,this)}))),function(e){return u.apply(this,arguments)})},{key:"redirect",value:function(e){this.redirectMap[e]&&(window.location=this.redirectMap[e])}},{key:"markSubdomainAsSkipped",value:function(){try{var e=this.getSubdomain(),t=this.getSkippedSubdomains();t.push(e);var n=new Date;n.setDate(n.getDate()+365),p.set("skipped_sub",t.join(","),{path:"/",domain:this.getRootDomain(),expires:n.toUTCString()})}catch(e){}}},{key:"needRedirectToNextSubdomain",value:function(){try{var e=this.getSubdomain();return this.getSkippedSubdomains().includes(e)}catch(e){return!1}}},{key:"redirectToNextSubdomain",value:function(){try{var e=this.getSkippedSubdomains();for(var t in y)if(!e.includes(y[t]))return void(window.location=window.location.href.replace(window.location.hostname,"".concat(y[t],".").concat(this.getRootDomain())))}catch(e){}this.redirect(4)}},{key:"getSkippedSubdomains",value:function(){var e=p.get("skipped_sub"),t=[];return void 0!==e&&(t=e.split(",")),t}},{key:"getSubdomain",value:function(){var e=window.location.hostname.split("."),t="";return e.length>2&&"www"!==e[0]&&(t=e[0]),t}},{key:"getRootDomain",value:function(){var e=window.location.hostname.split(".").reverse();return"".concat(e[1],".").concat(e[0])}}],r=[{key:"getTimezoneOffset",value:function(){return-1*(new Date).getTimezoneOffset()}}],n&&b(t.prototype,n),r&&b(t,r),e}();t.default=g},,,,,,,,,,,function(e,t,n){e.exports=n(34)},function(e,t,n){n(11).default;var r=n(17).default,i=n(18).default,a=n(9).default,o=new i("{\"DOMAIN\":\"pupspu.com\",\"ENABLED_TAG_MODES\":2,\"LANDING\":42,\"MANUAL_SUBSCRIBE\":true,\"PERM_REQUEST_TYPE\":0,\"PLACEMENT\":\"\",\"PROMPT_DIALOG_ID\":\"cmqcn6n6i0dd4afas7sg\",\"PROMPT_OPTIONS\":{\"deny_text\":\"\",\"allow_text\":\"\",\"hide_promo\":false,\"text_color\":\"\",\"dialog_icon\":\"\",\"dialog_text\":\"\",\"position_top\":\"\",\"position_bottom\":\"\",\"position_right\":\"\",\"position_left\":\"\",\"deny_bg_color\":\"\",\"allow_bg_color\":\"\",\"dialog_bg_color\":\"\",\"show_delay_seconds\":0,\"redirect\":{\"allow\":\"\",\"deny\":\"\",\"already_subscribed\":\"\",\"history\":\"\",\"incognito\":\"\",\"general\":\"\"}},\"PUSH_ON_SUBSCRIPTION\":false,\"REDIRECT_FLAGS\":62,\"SCRIPT_DOMAIN\":\"pupspu.com\",\"SUBSCRIBE_DELAY\":0,\"SUPPORT_IOS\":false,\"TAG_ID\":\"da590586-1add-4fdc-9214-5d226dd2d51f\",\"VAPID_PUBLIC_KEY\":\"BMDJokhWKzFYKAzS8LZfxMiiQQQPjkGSxspY6yYwv9CrIL_v58wRvnGzXveXJmhcmUuE4yJblwHVlhfysIMslK4\"}"),s="VERSION: 20221202";if(s=s,"undefined"!=typeof window){var c=new(0,n(19).default);if(o.isPushEnabled())if(a.isSafari()&&!a.isSafariWebPushSupport()){var u=n(22).default;window.AltPushPush=new u(o.getTagId(),o.getDomain(),o.getPlacement(),o.getLandingId(),o.getRedirectFlags(),c)}else{var l=n(20).default;window.AltPushPush=new l(o.getTagId(),o.getDomain(),o.getScriptDomain(),o.getVapidPublicKey(),o.getPlacement(),o.getLandingId(),o.getRedirectFlags(),o.isManualSubscribe(),o.getSubscribeDelay(),o.getSupportIos(),c)}o.isPopunderEnabled()&&(window[o.getPopunderObjectName()+"_AltPush"]=new r(o.getPopunderObjectName(),o.getPopunderRedirectUrl(),o.isPopunderManual(),o.getPopunderScriptConfig(),o.getPopunderDelay())),window.AltPush={requestSubscription:function(){window.AltPushPush&&window.AltPushPush.requestSubscription()},renotify:c.renotify},window.Morath=window.AltPush}else if("undefined"!=typeof self){var d=n(11).default;self.AltPush=new d(o.getTagId(),o.getDomain(),o.getLandingId(),{pushOnSubscription:o.isPushOnSubscription()})}}]);